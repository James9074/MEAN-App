<div class="row margin-bottom">
	<div class="col-xs-1"></div>
	<form method="GET" id="filterNeedsForm">
		<div class="col-xs-10" id="needsFilter">
			<div class="col-xs-3">
				<input class="form-control" type="text" id="search" name="search" placeholder="Search"/>
			</div>
			<div class="col-xs-3">
				<select class="form-control" name="department" id="department">
					<option value="">All departments</option>
					{{#each org.departments}}
						<option value="{{this.departmentName}}">{{this.departmentName}}</option>
					{{/each}}
				</select>
			</div>
			<div class="col-xs-3">
				<select class="form-control" name="sortBy" id="sortBy">
					<option value="newest">Newest first</option>
					<option value="oldest">Oldest first</option>
				</select>
			</div>
			<div class="col-xs-3"><button type="submit" class="btn">Filter Needs</button></div>
		</div>
	</form>
	<div class="col-xs-1"></div>
</div>

{{#if isAdmin}}
	<div class="row">
		<div class="col-xs-1"></div>
		<div class="col-xs-10">
			<a type="button" class="btn" href="/org/{{org.shortPath}}/needs/new">+ Add New Need</a>
			<a type="button" class="btn">Needs Archive &#187</a>
		</div>
		<div class="col-xs-1"></div>
	</div>
{{/if}}

<hr>

{{#each needs}}
	<div class="row">
		<div class="col-xs-7" style="border-right:1px solid #eee;">
			<div class="col-xs-12"><h2>{{this.title}}</h2></div>
			<div class="col-xs-11"><p>{{this.description}}</p></div><div class="col-xs-1"></div>
			<div class="col-xs-12">
				{{#if ../isSubscriber}}
					<a type="button" class="btn" href="">Contribute</a>
				{{else}}
					<a type="button" class="btn dis-btn" href="">Contribute</a>				
				{{/if}}
				<span class="distinct-text">OR</span>
				<a class="org-link" href="mailto:{{this.creator.email}}">Contact via email</a>

			</div>
		</div>
		<div class="col-xs-5">
			<div class="col-xs-12 large-text"><strong>Contributed:</strong> {{isMonetary this.needType}}{{this.currentAmount}}</div>
			<div class="col-xs-12 large-text"><strong>Goal:</strong> {{isMonetary this.needType}}{{this.goalAmount}}</div>
			<div class="col-xs-12 large-text"><strong>Department:</strong> {{this.department.departmentName}}</div>
			<div class="col-xs-12 large-text"><strong>Needed by:</strong> {{formatTime this.needDate "MMM DD, YYYY"}}</div>
			<div class="col-xs-12">
				<div class="progress">
					<div class="progress-bar prgrs" role="progressbar" aria-valuenow="{{calcProgress this.currentAmount this.goalAmount}}"
		aria-valuemin="0" aria-valuemax="100" style="width:{{calcProgress this.currentAmount this.goalAmount}}%">
						{{calcProgress this.currentAmount this.goalAmount}}%
					</div>
				</div>
			</div>
			<div class="col-xs-12">
				{{#if (isAdvocateOfNeed this ../user)}}
					<a type="button" class="btn alt-btn" href="/org/{{../org.shortPath}}/needs/edit/{{this.id}}">Edit need</a>
				{{/if}}
			</div>
		</div>
	</div>
	<hr>
{{else}}
	<div class="row">
		<div class="col-xs-1"></div>
		<div class="col-xs-11"><strong>Sorry. There are no needs listed at this time.</strong></div>
	</div>
{{/each}}